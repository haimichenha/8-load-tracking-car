/**
  * @file    bsp_key2.h
  * @brief   PC4按键驱动 (亮度调节按键)
  */

#ifndef __BSP_KEY2_H
#define __BSP_KEY2_H

#include "stm32f10x.h"

/*====================================================================================*/
/*                                  硬件配置                                           */
/*====================================================================================*/

/* KEY2 - PC4 */
#define KEY2_GPIO_PORT      GPIOC
#define KEY2_GPIO_PIN       GPIO_Pin_4
#define KEY2_GPIO_CLK       RCC_APB2Periph_GPIOC

/* 按键电平定义 (根据实际电路调整) */
#define KEY2_PRESSED_LEVEL  0   /* 按下时为低电平 */

/*====================================================================================*/
/*                                  时间参数                                           */
/*====================================================================================*/

#define KEY2_DEBOUNCE_MS    20      /* 消抖时间 */
#define KEY2_LONG_PRESS_MS  1000    /* 长按阈值 */

/*====================================================================================*/
/*                                  类型定义                                           */
/*====================================================================================*/

/**
  * @brief  按键事件类型
  */
typedef enum
{
    KEY2_EVENT_NONE = 0,    /* 无事件 */
    KEY2_EVENT_SHORT,       /* 短按 */
    KEY2_EVENT_LONG         /* 长按 */
} Key2Event_t;

/*====================================================================================*/
/*                                  函数声明                                           */
/*====================================================================================*/

/**
  * @brief  KEY2初始化
  */
void Key2_Init(void);

/**
  * @brief  KEY2扫描 (需要周期性调用, 建议1ms)
  */
void Key2_Scan(void);

/**
  * @brief  获取KEY2事件
  * @return 按键事件
  */
Key2Event_t Key2_GetEvent(void);

/**
  * @brief  清除KEY2事件
  */
void Key2_ClearEvent(void);

/**
  * @brief  检查KEY2是否按下
  * @return 1-按下, 0-未按下
  */
uint8_t Key2_IsPressed(void);

#endif /* __BSP_KEY2_H */
